(this.webpackJsonprouletgastronomic=this.webpackJsonprouletgastronomic||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),s=n(17),i=n.n(s),o=(n(36),n(4)),l=n(5),u=n(7),d=n(6),h=(n(37),n(9)),j=n(13),p=n(27),b=n.n(p),O=n(28),m=n(14),f=n.n(m),v=n(29),g=n.n(v),x=n(11),y=n(16),S=n(2),w=n(3),k=n(10),C=n(58);!function(e){e.ADD="players/add",e.REMOVE="players/remove",e.CONSUME="players/consume"}(a||(a={}));var N,D,M=Object(C.a)((N={},Object(S.a)(N,a.ADD,(function(e,t){var n=t.name;console.log(Math.max.apply(Math,Object(k.a)(Object.values(e).map((function(e){return e.n})))));var a=Math.max.apply(Math,[-1].concat(Object(k.a)(Object.values(e).map((function(e){return e.n})))))+1;return Object(w.a)(Object(w.a)({},e),{},Object(S.a)({},n,{n:a,name:n,dishes:[]}))})),Object(S.a)(N,a.REMOVE,(function(e,t){var n=t.name;e[n];return Object(x.a)(e,[n].map(y.a))})),Object(S.a)(N,a.CONSUME,(function(e,t){var n=t.name,a=t.dishes;e[n],Object(x.a)(e,[n].map(y.a));return Object(w.a)(Object(w.a)({},e),{},Object(S.a)({},n,Object(w.a)(Object(w.a)({},e[n]),{},{dishes:[].concat(Object(k.a)(e[n].dishes),Object(k.a)(a))})))})),N),{});!function(e){e.ADD="dishes/add",e.REMOVE="dishes/remove",e.ADD_MARKS="dishes/add-marks"}(D||(D={}));var P,E,A=function(e){var t=e.name,n=e.properties,a=e.isDop,r=e.dop,c=e.pic;return{type:D.ADD,name:t,properties:n,isDop:a,dop:r,pic:c}},R=function(e){return{type:D.REMOVE,name:e}},F=function(e,t){return{type:D.ADD_MARKS,name:e,marks:t}};!function(e){e._merz="_merz",e.Sour="sour",e.Salty="salty",e.Spicy="spicy",e.Sweet="sweet",e.Bitter="bitter",e.Alcoholic="alcoholic"}(E||(E={}));var V,z,T=Object(C.a)((P={},Object(S.a)(P,D.ADD,(function(e,t){var n=t.name,a=t.properties,r=t.dop,c=t.isDop,s=t.pic;return Object(w.a)(Object(w.a)({},e),{},Object(S.a)({},n,{name:n,marks:[],isDop:c,dop:r,properties:a,pic:s}))})),Object(S.a)(P,D.REMOVE,(function(e,t){var n=t.name;e[n];return Object(x.a)(e,[n].map(y.a))})),Object(S.a)(P,D.ADD_MARKS,(function(e,t){var n=t.name,a=t.marks;return Object(w.a)(Object(w.a)({},e),{},Object(S.a)({},n,Object(w.a)(Object(w.a)({},e[n]),{},{marks:[].concat(Object(k.a)(e[n].marks),[a])})))})),P),{});!function(e){e.ON="fullscreen/on",e.OFF="fullscreen/off",e.SET="fullscreen/set",e.REVERSE="fullscreen/reverse"}(z||(z={}));var _=Object(C.a)((V={},Object(S.a)(V,z.ON,(function(){return!0})),Object(S.a)(V,z.OFF,(function(){return!1})),Object(S.a)(V,z.SET,(function(e,t){return t.value})),Object(S.a)(V,z.REVERSE,(function(e){return!e})),V),!1),H=Object(j.b)({undoable:f()(Object(j.b)({players:M,dishes:T}),{limit:10}),fullscreen:_}),B=Object(j.c)(Object(j.a)(O.a,b.a),g()()),U=Object(j.d)(H,B),L=n(8),I=n.n(L),W=(n(48),n(0)),X=function(e){var t=e.ref,n=e.children,a=e.height,r=e.onClick,c=e.onMouseDown,s=e.onMouseUp,i=e.disabled,o=e.width,l=e.className,u=e.value,d=e.name;return Object(W.jsx)("button",{ref:t,className:I()("button",l),onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return!i&&r&&r({e:e,value:u,name:d})})),onMouseUp:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return!i&&s&&s({e:e,value:u,name:d})})),onMouseDown:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return!i&&c&&c({e:e,value:u,name:d})})),style:{width:o,height:a},disabled:i,children:n})},Y=function(e){var t=e.className,n=e.selected,a=e.onClick,r=e.onMouseDown,c=e.onMouseUp,s=Object(x.a)(e,["className","selected","onClick","onMouseDown","onMouseUp"]);return Object(W.jsx)(X,Object(w.a)(Object(w.a)({},s),{},{onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return a&&a(Object(w.a)(Object(w.a)({},e),{},{selected:n}))})),onMouseDown:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r&&r(Object(w.a)(Object(w.a)({},e),{},{selected:n}))})),onMouseUp:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return c&&c(Object(w.a)(Object(w.a)({},e),{},{selected:n}))})),className:I()("button-select",t,Object(S.a)({},"button-select-selected",n))}))};function K(e){if(e)return e.getBoundingClientRect?function(e){var t=e.getBoundingClientRect(),n=document.body,a=document.documentElement,r=window.pageYOffset||a.scrollTop||n.scrollTop,c=window.pageXOffset||a.scrollLeft||n.scrollLeft,s=a.clientTop||n.clientTop||0,i=a.clientLeft||n.clientLeft||0,o=t.top+r-s,l=t.left+c-i;return{top:Math.round(o),left:Math.round(l),box:t}}(e):function(e){var t=0,n=0;for(;e;)t+=parseInt(e.offsetTop),n+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:t,left:n,box:null}}(e)}var J=function(e){return e.toFixed(1)},$=function(e){return function(t,n,a){return t-a/e}},q=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).buttonRef=void 0,a.handleDown=function(e){if(console.log("down"),!a.state.startValue){var t=e.e;t.persist();var n=a.props,r=n.onMouseDown,c=n.name,s=n.selected,i=a.state.value;r&&r({e:t,value:i,name:c,selected:s}),a.setState((function(e){return{startValue:e.value,startPoint:[t.clientX,t.clientY]}}),(function(){document.addEventListener("mousemove",a.handleMove),document.addEventListener("mouseup",a.handleUp)}))}},a.handleMove=function(e){var t=a.props,n=t.onChange,r=t.name,c=t.selected,s=a.calcValue(e);console.log("move",s),n&&n({e:e,value:s,name:r,selected:c}),a.setState({value:s})},a.calculateOneStep=function(e){var t=a.props,n=t.precision,r=void 0===n?100:n,c=t.range;return"function"===typeof r?(c[1]-c[0])/r(e):(c[1]-c[0])/r},a.handleUp=function(e){var t=a.props,n=t.onClick,r=t.onMouseUp,c=t.onChange,s=t.name,i=t.selected,o=t.width,l=void 0===o?70:o,u=(t.precision,t.range),d=a.calcValue(e),h=a.calculateOneStep(d);if(Math.abs(d-a.state.startValue)<h){var j=K(e.target).left;d=Math.min(Math.max(a.state.startValue+(j+l/2<e.pageX?h:-h),u[0]),u[1]),c&&c({e:e,value:d,name:s,selected:i})}else r&&r({e:e,value:d,name:s,selected:i}),n&&n({value:d,name:s,e:e,selected:i});a.setState({value:d,startValue:null,startPoint:null},(function(){document.removeEventListener("mousemove",a.handleMove),document.removeEventListener("mouseup",a.handleUp)}))},a.handlePress=function(e){if(!a.state.startValue){var t=a.props,n=t.onPress,r=t.name,c=t.selected,s=a.state.value;n&&n({e:e,value:s,name:r,selected:c}),a.setState((function(e){return{startValue:e.value,startPoint:null}}),(function(){document.addEventListener("mousemove",a.handlePressed)}))}},a.handlePressed=function(e){if(a.state.startPoint){var t=a.props,n=t.onChange,r=t.name,c=t.selected,s=a.calcValue(e);n&&n({e:e,value:s,name:r,selected:c}),a.setState({value:s})}else a.setState({startPoint:[e.clientX,e.clientY]})},a.handleRelease=function(e){var t=a.props,n=t.onRelease,r=t.name,c=t.selected,s=a.state.value;n&&n({value:s,name:r,e:e,selected:c}),a.setState({value:s,startValue:null,startPoint:null},(function(){document.removeEventListener("mousemove",a.handlePressed)}))},a.calcValue=function(e){console.log(a.state.startValue);var t=a.props,n=t.range,r=t.valueD,c=void 0===r?$(5):r,s=t.integer,i=c(a.state.startValue,e.clientX-a.state.startPoint[0],e.clientY-a.state.startPoint[1]);return i=Math.min(Math.max(i,n[0]),n[1]),s&&(i=Math.round(i)),i};var c=e.range;return a.state={value:e.value||c[0],startPoint:null,startValue:null},a.buttonRef=r.createRef(),a}return Object(l.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return t.value!==this.state.value||!!t.startPoint||!!this.state.startPoint||e.shortcut!==this.props.shortcut||e.className!==this.props.className}},{key:"render",value:function(){var e=this.props,t=e.range,n=e.width,a=void 0===n?70:n,r=e.className,c=e.getText,s=void 0===c?J:c,i=e.text,o=(e.shortcut,Object(x.a)(e,["range","width","className","getText","text","shortcut"])),l=this.state,u=l.value,d=void 0===u?0:u,h=l.startValue;l.startPoint;return console.log("number button render",s(d)),Object(W.jsx)(Y,Object(w.a)(Object(w.a)({},o),{},{className:I()("button-number",r,Object(S.a)({},"button-number-active",!!h)),width:a,ref:this.buttonRef,onMouseDown:this.handleDown,children:Object(W.jsx)("div",{className:"button-number-value",style:{width:(d-t[0])/(t[1]-t[0])*100+"%"},children:s?s(d):i})}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Object(w.a)({},t.startPoint||e.value===t.value?{}:{value:e.value})}}]),n}(r.Component),G=function(e){var t=e.placeholder,n=e.onChange,a=e.onFocus,r=e.onBlur,c=e.value,s=e.className;return Object(W.jsx)("input",{placeholder:t,className:I()(s,"input-text"),type:"text",value:c||"",onFocus:a,onBlur:r,onChange:function(e){n&&n(e.target.value)}})},Q=function(e){return e.value},Z=function(e){return e.text},ee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){var n=t.value,a=(t.selected,t.e),r=e.props,c=r.name,s=r.items,i=r.onChange,o=r.getValue,l=void 0===o?Q:o,u=r.nullAble,d=r.value,h=l(n);u&&d===h&&(h=null),i&&i({value:h,e:a,item:n,items:s,name:c})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.items,c=t.value,s=t.width,i=t.height,o=t.name,l=t.getValue,u=void 0===l?Q:l,d=t.getText,h=void 0===d?Z:d,j=t.br;return console.log("select buttons render",o),Object(W.jsx)("span",{className:I()(n,"select-buttons"),children:a.map((function(t,n){return Object(W.jsxs)(r.Fragment,{children:[!!j&&!!n&&!(n%j)&&Object(W.jsx)("br",{}),Object(W.jsx)(Y,{width:s,height:i,value:t,selected:u(t)===c,onMouseUp:function(e){console.log(e)},onClick:e.handleClick,children:h(t)})]},u(t))}))})}}]),n}(r.PureComponent),te=(n(50),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.nullText,a=Object(x.a)(e,["className","nullText"]),r=a.value,c=a.getText,s=void 0===c?Z:c;return console.log("select drop render",a.name,r),Object(W.jsxs)("div",{className:I()(t,"select-drop"),children:[Object(W.jsx)(X,{className:"select-drop-value",children:s(r)||n||"null"}),Object(W.jsx)(ee,Object(w.a)(Object(w.a)({},a),{},{className:"select-drop-items"}))]})}}]),n}(r.PureComponent)),ne=(n(51),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).inputRef=void 0,a.handleFile=function(e){var t=new FileReader;t.onload=function(e){var t=new Image;t.onload=function(){a.props.onChange(t)},t.src=e.target.result,a.inputRef.current.value=null},e.target.files[0]&&t.readAsDataURL(e.target.files[0])},a.inputRef=r.createRef(),a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.children;return Object(W.jsxs)("div",{className:"input-file",children:[Object(W.jsx)("input",{type:"file",name:t,id:t,ref:this.inputRef,onChange:this.handleFile}),Object(W.jsx)("label",{htmlFor:t,children:n})]})}}]),n}(r.PureComponent));var ae,re;function ce(e,t,n){var a=document.createElement("canvas");return a.width=t||e.width,a.height=n||e.height,a.getContext("2d").drawImage(e,0,0,t||e.width,n||e.height),a.toDataURL("image/png").replace(/^data:image\/(png|jpg);base64,/,"")}function se(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}console.log((new Date).getTime().toString(4));var ie,oe,le=(ae={},Object(S.a)(ae,E.Sour,"\u043a\u0438\u0441\u043b\u043e\u0435"),Object(S.a)(ae,E.Salty,"\u0441\u043e\u043b\u0435\u043d\u043e\u0435"),Object(S.a)(ae,E.Spicy,"\u043e\u0441\u0442\u0440\u043e\u0435"),Object(S.a)(ae,E.Sweet,"\u0441\u043e\u043b\u0435\u043d\u043e\u0435"),Object(S.a)(ae,E.Bitter,"\u0433\u043e\u0440\u044c\u043a\u043e\u0435"),Object(S.a)(ae,E.Alcoholic,"\u0430\u043b\u043a\u043e\u0433\u043e\u043b\u044c"),Object(S.a)(ae,E._merz,"\u043c\u0435\u0440\u0437\u043e\u0441\u0442\u044c"),ae),ue=$(9),de=(re={},Object(S.a)(re,E.Sour,0),Object(S.a)(re,E.Salty,0),Object(S.a)(re,E.Spicy,0),Object(S.a)(re,E.Sweet,0),Object(S.a)(re,E.Bitter,0),Object(S.a)(re,E.Alcoholic,0),Object(S.a)(re,E._merz,0),re),he={name:"",properties:de,prop:null,dop:0,pic:null},je=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state=Object(w.a)({open:!1,isDop:!1},he),e.open=function(){return e.setState({open:!0})},e.close=function(){return e.setState(Object(w.a)({open:!1},he))},e.changeHandler=function(t){return function(n){var a=n.value;e.setState((function(e){return Object(w.a)(Object(w.a)({},e),{},{properties:Object(w.a)(Object(w.a)({},e.properties),{},Object(S.a)({},t,a))})}))}},e.nameChangeHandler=function(t){return e.setState({name:t})},e.propChangeHandler=function(t){var n=t.value;e.setState((function(e){return{prop:n,properties:Object(w.a)(Object(w.a)({},de),{},Object(S.a)({},E._merz,e.properties[E._merz]))}}))},e.submitHandler=function(){e.props.onSubmit({name:e.state.name,properties:e.state.properties,isDop:e.state.isDop,dop:e.state.properties[E._merz],pic:e.state.pic}),e.setState(he)},e.handleIsDopChange=function(t){e.setState({isDop:!t.selected})},e.handlePic=function(t){e.setState({pic:ce(t,50,50)})},e}return Object(l.a)(n,[{key:"render",value:function(){return this.state.open?Object(W.jsxs)("div",{className:"dish-form",children:[Object(W.jsxs)("div",{className:"flex-row",children:[Object(W.jsxs)("div",{className:"flex-column",children:[Object(W.jsx)(Y,{selected:this.state.isDop,onClick:this.handleIsDopChange,children:"\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442."}),Object(W.jsx)(ne,{onChange:this.handlePic,name:"pic",children:"\u0438\u0437\u043e\u0431\u0440."})]}),this.state.pic&&Object(W.jsx)("img",{width:70,height:40,src:"data:image/png;base64,"+this.state.pic})]}),Object(W.jsx)("div",{className:"dish-merz",children:Object(W.jsx)(q,{getText:function(e){return Object(W.jsx)("span",{className:"merz-value",children:e.toFixed(2)})},width:140,height:30,range:[0,10],valueD:ue,integer:this.state.isDop,value:this.state.properties[E._merz],onChange:this.changeHandler(E._merz)})}),Object(W.jsx)(G,{placeholder:"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"dish-name-input",value:this.state.name,onChange:this.nameChangeHandler}),Object(W.jsx)("div",{className:"row1",children:!this.state.isDop&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(te,{value:this.state.prop,onChange:this.propChangeHandler,getValue:function(e){return e},getText:function(e){return le[e]},nullAble:!0,nullText:"-",items:[E.Sour,E.Salty,E.Spicy,E.Sweet,E.Bitter,E.Alcoholic]}),Object(W.jsx)("div",{className:"dish-props",children:this.state.prop?Object(W.jsx)("div",{className:"dish-prop",children:Object(W.jsx)(q,{range:[0,10],valueD:ue,value:this.state.properties[this.state.prop],onChange:this.changeHandler(this.state.prop)})}):null})]})}),Object(W.jsxs)("div",{className:"row1",children:[Object(W.jsx)(X,{className:"dish-submit",onClick:this.submitHandler,children:"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),Object(W.jsx)(X,{onClick:this.close,className:"dish-close-form",children:"\u043e\u0442\u043c\u0435\u043d\u0430"})]})]}):Object(W.jsx)(X,{onClick:this.open,className:"dish-open-form",children:"+"})}}]),n}(r.PureComponent),pe=Object(h.b)((function(e){return{}}),{})(je),be=(n(52),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.addDish,a=t.dishes,r=t.removeDish;return Object(W.jsxs)("div",{className:"dishes",children:[Object(W.jsx)(pe,{onSubmit:n}),Object(W.jsx)("div",{className:"dishes-list",children:Object.values(a).map((function(t){return Object(W.jsxs)("div",{className:"dish-item",style:{borderBottom:t.isDop?"1px solid white":"1px solid red"},children:[Object(W.jsx)("div",{className:"dish-name",children:t.name}),Object(W.jsx)("div",{className:"dish-mark",children:t.isDop?t.dop:t.marks.length?(t.marks.reduce((function(e,t){return e+t[E._merz]}),0)/t.marks.length).toFixed(2):0}),Object(W.jsx)(X,{className:"dish-delete-button",onClick:r.bind(e,t.name),children:"del"})]})}))})]})}}]),n}(r.PureComponent)),Oe={addMarks:F,addDish:A,removeDish:R},me=Object(h.b)((function(e){return{dishes:e.undoable.present.dishes}}),Oe)(be),fe=(n(53),ie={},Object(S.a)(ie,E.Sour,"\u043a\u0438\u0441\u043b\u043e\u0435"),Object(S.a)(ie,E.Salty,"\u0441\u043e\u043b\u0435\u043d\u043e\u0435"),Object(S.a)(ie,E.Spicy,"\u043e\u0441\u0442\u0440\u043e\u0435"),Object(S.a)(ie,E.Sweet,"\u0441\u043b\u0430\u0434\u043a\u043e\u0435"),Object(S.a)(ie,E.Bitter,"\u0433\u043e\u0440\u044c\u043a\u043e\u0435"),Object(S.a)(ie,E.Alcoholic,"\u0430\u043b\u043a\u043e\u0433\u043e\u043b\u044c"),Object(S.a)(ie,E._merz,"\u043c\u0435\u0440\u0437"),ie),ve=$(9),ge=$(50),xe=(oe={},Object(S.a)(oe,E.Sour,{fontFamily:"monospace",background:"blue",color:"yellowgreen",textShadow:"1px 1px 0 yellow"}),Object(S.a)(oe,E.Alcoholic,{background:"palevioletred",fontStyle:"italic",color:"black",textTransform:"capitalize"}),Object(S.a)(oe,E.Bitter,{background:"black",color:"powderblue",fontWeight:"bold",fontFamily:"Arial black"}),Object(S.a)(oe,E.Salty,{background:"white",fontWeight:"bold",color:"dodgerblue"}),Object(S.a)(oe,E.Spicy,{background:"red",color:"ivory",textShadow:"yellow 1px 1px 0px"}),Object(S.a)(oe,E.Sweet,{backgroundColor:"rgb(255,255,255);",background:"repeating-linear-gradient(90deg, rgba(255,255,255,1) 35%, rgba(0,212,255,1) 35%, rgba(255,0,0,1) 53%)",color:"white"}),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e,a;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=t.call.apply(t,[this].concat(c))).state={properties:(e={},Object(S.a)(e,E.Sour,0),Object(S.a)(e,E.Salty,0),Object(S.a)(e,E.Spicy,0),Object(S.a)(e,E.Sweet,0),Object(S.a)(e,E.Bitter,0),Object(S.a)(e,E.Alcoholic,0),Object(S.a)(e,E._merz,0),e),dops:{},dish:null},a.changeHandler=function(e){return function(t){var n=t.value;a.setState((function(t){return Object(w.a)(Object(w.a)({},t),{},{properties:Object(w.a)(Object(w.a)({},t.properties),{},Object(S.a)({},e,n))})}))}},a.dishChangeHandler=function(e){var t=e.value;return a.setState({dish:t})},a.submitHandler=function(){var e=a.state,t=e.properties,n=e.dish,r=e.dops;a.props.onSubmit(t,n,Object.keys(r).reduce((function(e,t){return[].concat(Object(k.a)(e),Object(k.a)(new Array(r[t]).fill(t)))}),[]))},a.handleDopClick=function(e){var t=e.value;a.setState((function(e){return{dops:Object(w.a)(Object(w.a)({},e.dops),{},Object(S.a)({},t,e.dops[t]>3?0:(e.dops[t]||0)+1))}}))},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(W.jsxs)("div",{className:"step-form",children:[Object(W.jsx)(ee,{width:70,height:40,className:"dishes",value:this.state.dish,onChange:this.dishChangeHandler,getText:function(e){var t=e.name,n=e.properties,a=e.pic;return a?Object(W.jsxs)(W.Fragment,{children:[a&&Object(W.jsx)("img",{width:70,height:40,src:"data:image/png;base64,"+a}),Object(W.jsx)("span",{style:{color:se(),fontWeight:100*n[E._merz]},children:t})]}):Object(W.jsx)("div",{style:{color:se()},children:t})},getValue:function(e){return e.name},items:Object.values(this.props.dishes).filter((function(e){return!e.isDop}))}),Object(W.jsx)("div",{className:"dops",children:Object.values(this.props.dishes).filter((function(e){return e.isDop})).map((function(t){var n=t.name,a=t.pic,r=a?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("img",{width:70,height:40,src:"data:image/png;base64,"+a}),Object(W.jsxs)("span",{style:{color:se()},children:[n,Object(W.jsx)("span",{children:e.state.dops[n]||""})]})]}):Object(W.jsxs)("div",{style:{color:se()},children:[n,Object(W.jsx)("span",{children:e.state.dops[n]||""})]});return Object(W.jsx)(Y,{className:"dop-button",height:40,onClick:e.handleDopClick,value:n,selected:e.state.dops[n],children:r})}))}),Object(W.jsx)("div",{className:"dish-props",children:[E.Sour,E.Salty,E.Spicy,E.Sweet,E.Bitter,E.Alcoholic].map((function(t){return Object(W.jsxs)("div",{className:"dish-prop-item",children:[Object(W.jsx)("div",{className:"dish-prop-item-title",children:fe[t]}),Object(W.jsx)(q,{height:30,range:[0,10],valueD:ve,value:e.state.properties[t],onChange:e.changeHandler(t)})]})}))}),Object(W.jsx)("div",{className:"dish-merz",style:{},children:Object(W.jsx)(q,{getText:function(e){return Object(W.jsx)("span",{style:{fontSize:172*Math.pow(e/2,2)/10+172*Math.pow(e/2,2)/100},children:e})},width:420,height:160,range:[0,10],valueD:ge,value:this.state.properties[E._merz],onChange:this.changeHandler(E._merz)})}),Object(W.jsx)(X,{height:100,width:140,className:"submit",onClick:this.submitHandler,disabled:!this.state.dish,children:"\u0441\u044a\u0435\u043b"})]})}}]),n}(r.PureComponent)),ye=Object(h.b)((function(e){return{dishes:e.undoable.present.dishes}}),{})(xe),Se=(n(54),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",currentPlayer:null,openNew:!1},e.changeNameHandler=function(t){return e.setState({name:t})},e.stepHandler=function(t){return function(n,a,r){e.props.addMarks(a,n),e.props.consume(t,[a].concat(Object(k.a)(r))),e.setState({currentPlayer:null})}},e.chosePlayer=function(t){var n=t.value;e.state.currentPlayer===n?e.setState({currentPlayer:null}):e.setState({currentPlayer:n})},e.open=function(){e.setState({openNew:!0})},e.close=function(){e.setState({openNew:!1})},e.handleSubmit=function(t){e.props.addPlayer(t),e.setState({name:""})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(W.jsxs)("div",{className:"players",children:[this.state.openNew?Object(W.jsxs)("div",{className:"new-player",children:[Object(W.jsx)(G,{className:"new-player-input",value:this.state.name,placeholder:"\u0438\u043c\u044f \u0438\u0433\u0440\u043e\u043a\u0430",onChange:this.changeNameHandler}),Object(W.jsxs)("div",{className:"new-player-buttons",children:[Object(W.jsx)(X,{className:"new-player-submit",onClick:this.handleSubmit.bind(this,this.state.name),children:"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),Object(W.jsx)(X,{onClick:this.close,children:"\u043e\u0442\u043c\u0435\u043d\u0430"})]})]}):Object(W.jsx)(Y,{className:"add-new-player",onClick:this.open,children:"+"}),Object(W.jsx)("div",{className:"players-list",children:Object.values(this.props.players).reverse().map((function(t){var n=t.name===e.state.currentPlayer;return Object(W.jsxs)("div",{className:I()("player-item","brain".concat(t.n%6+1)),children:[Object(W.jsx)(Y,{className:"player-name",onClick:e.chosePlayer,value:t.name,selected:n,children:Object(W.jsx)("span",{children:t.name})}),Object(W.jsx)("div",{className:"player-ate",children:t.dishes.map((function(e){return Object(W.jsxs)("span",{children:[e," \\"]})}))}),Object(W.jsx)(X,{className:"player-delete",onClick:e.props.removePlayer.bind(e,t.name),children:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"}),n&&Object(W.jsx)(ye,{onSubmit:e.stepHandler(t.name)})]})}))})]})}}]),n}(r.PureComponent)),we={addPlayer:function(e){return{type:a.ADD,name:e}},removePlayer:function(e){return{type:a.REMOVE,name:e}},addMarks:F,consume:function(e,t){return{type:a.CONSUME,name:e,dishes:t}}},ke=Object(h.b)((function(e){return{players:e.undoable.present.players}}),we)(Se),Ce=n(31),Ne=n.n(Ce),De=(n(56),[E.Sweet,E.Spicy,E.Salty,E.Bitter,E.Alcoholic,E.Sour]),Me=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.dishes,n=e.players,a=e.onClose,r=Object.values(t).reduce((function(e,t){var n=t.name,a=t.marks,r=t.dop,c=t.isDop;return e[n]=c?r:a.reduce((function(e,t){return e+t[E._merz]}),0)/a.length,e}),{}),c=Object.values(t).reduce((function(e,t){var n=t.name,a=t.marks;t.dop;if(!t.isDop){var r=a.reduce((function(e,t){return De.forEach((function(n){return e[n]=(e[n]||0)+t[n]})),e}),{});console.log(a,r),e[n]=Object.keys(r).reduce((function(e,t){return e[t]=e[t]/a.length,e}),r),console.log(e[n])}return e}),{}),s=Object.values(n).reduce((function(e,n){var a=n.dishes;return e[n.name]={total:a.reduce((function(e,t){return e+r[t]}),0),dops:a.reduce((function(e,n){return t[n].isDop&&(e[n]=(e[n]||0)+1),e}),{}),dishes:a.reduce((function(e,n){return!t[n].isDop&&(e[n]=(e[n]||0)+1),e}),{})},e}),{});return Object(W.jsx)("div",{className:"report-backdrop",onClick:a,children:Object(W.jsx)("div",{className:"report",children:Object(W.jsx)("table",{children:1===this.props.type?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{children:"\u0438\u043c\u044f"}),Object(W.jsx)("td",{children:"\u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435"}),Object(W.jsx)("td",{children:"\u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435"}),Object(W.jsx)("td",{children:"\u0431\u0430\u043b\u043b\u044b"})]}),Object.keys(n).map((function(e){return Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{children:e}),Object(W.jsx)("td",{children:Object.keys(s[e].dops).map((function(t){return Object(W.jsxs)("div",{children:[s[e].dops[t]," ",t]})}))}),Object(W.jsx)("td",{children:Object.keys(s[e].dishes).map((function(t){return Object(W.jsxs)("div",{children:[s[e].dishes[t]," ",t," "]})}))}),Object(W.jsx)("td",{style:{fontSize:7*s[e].total},children:s[e].total.toFixed(4)})]})}))]}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{children:"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(W.jsx)("td",{children:"\u043e\u0446\u0435\u043d\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0430"}),Object(W.jsx)("td",{children:"\u0441\u0440\u0435\u0434\u043d\u044f\u044f \u043e\u0446\u0435\u043d\u043a\u0430"}),Object(W.jsx)("td",{children:"\u0431\u0430\u043b\u043b\u044b \u0437\u0430 \u043c\u0435\u0440\u0437\u043e\u0441\u0442\u044c"}),Object(W.jsx)("td",{children:"\u043e\u0446\u0435\u043d\u043a\u0430 \u0432\u043a\u0443\u0441\u0430"}),Object(W.jsx)("td",{children:"\u0441\u0440\u0435\u0434\u043d\u044f\u044f \u043e\u0446\u0435\u043d\u043a\u0430 \u0432\u043a\u0443\u0441\u0430"}),Object(W.jsx)("td",{children:"\u0431\u0430\u043b\u043b\u044b \u0437\u0430 \u0432\u043a\u0443\u0441"})]}),Object.keys(t).filter((function(e){return!t[e].isDop})).map((function(e){var n,a,s=t[e],i=Object.keys(t[e].properties).reduce((function(e,t){return s.properties[t]>e?t:e}),null);return console.log(c[e]),Object(W.jsxs)("tr",{children:[Object(W.jsx)("td",{children:e}),Object(W.jsx)("td",{children:t[e].properties[E._merz]}),Object(W.jsx)("td",{children:null===(n=r[e])||void 0===n?void 0:n.toFixed(4)}),Object(W.jsx)("td",{style:{fontSize:10*r[e]},children:10-Math.abs((r[e]||0)-t[e].properties[E._merz])}),Object(W.jsxs)("td",{children:[i,t[e].properties[i]]}),Object(W.jsx)("td",{children:c[e][i]}),Object(W.jsx)("td",{style:{fontSize:10*c[e][i]},children:10-Math.abs(((null===(a=c[e][i])||void 0===a?void 0:a.toFixed(4))||0)-t[e].properties[i])})]})}))," "]})})})})}}]),n}(r.PureComponent),Pe=Object(h.b)((function(e){return{dishes:e.undoable.present.dishes,players:e.undoable.present.players}}),{})(Me),Ee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={report:0},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=(t.addMarks,t.addDish,t.dishes,t.removeDish,t.full),a=t.setFullScreen,r=t.reverseFullScreen;return Object(W.jsxs)(Ne.a,{enabled:n,onChange:a,children:[Object(W.jsx)("div",{className:"layout",children:Object(W.jsxs)("div",{className:"main",children:[Object(W.jsxs)("div",{className:"main-buttons",children:[Object(W.jsx)(X,{onClick:r,children:"\u25a1"}),Object(W.jsx)(X,{onClick:function(){return U.dispatch(m.ActionCreators.undo())},children:"<"}),Object(W.jsx)(X,{onClick:function(){return U.dispatch(m.ActionCreators.redo())},children:">"}),Object(W.jsx)(X,{onClick:function(){return e.setState({report:1})},children:"\u0438\u0442\u043e\u0433\u0438"}),Object(W.jsx)(X,{onClick:function(){return e.setState({report:2})},children:"\u0438\u0442\u043e\u0433\u0438 2"})]}),Object(W.jsx)(me,{}),Object(W.jsx)(ke,{}),Object(W.jsx)("div",{className:"ass-kebab",children:"ASS.KEBAB"})]})}),this.state.report&&Object(W.jsx)(Pe,{type:this.state.report,onClose:function(){return e.setState({report:0})}})]})}}]),n}(r.PureComponent),Ae={addMarks:F,addDish:A,removeDish:R,setFullScreen:function(e){return{type:z.SET,value:e}},reverseFullScreen:function(){return{type:z.REVERSE}}},Re=Object(h.b)((function(e){return{dishes:e.undoable.present.dishes,full:e.fullscreen}}),Ae)(Ee),Fe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(W.jsx)(h.a,{store:U,children:Object(W.jsx)(Re,{})})}}]),n}(c.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(W.jsx)(Fe,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),window.onbeforeunload=function(e){var t="Document 'foo' is not saved. You will lost the changes if you leave the page.";return"undefined"==typeof e&&(e=window.event),e&&(e.returnValue=t),t}}},[[57,1,2]]]);
//# sourceMappingURL=main.b84a3f07.chunk.js.map